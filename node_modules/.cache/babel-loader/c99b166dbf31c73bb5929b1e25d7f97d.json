{"ast":null,"code":"import _slicedToArray from\"E:/project/react/react-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from\"react\";import{useNavigate}from\"react-router\";import AuthContext,{Oathcontext}from\"../store/AuthContext\";import'./Auth.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Auth=function Auth(){//navigate\nvar navigate=useNavigate();//context\nvar oathContext=useContext(Oathcontext);var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loginToggle=_useState2[0],setLogin=_useState2[1];var toggleHandler=function toggleHandler(){setLogin(function(preVal){return!preVal;});};var submitHandler=function submitHandler(e){e.preventDefault();var emailInput=document.getElementById('email').value;var emailPassword=document.getElementById('password').value;console.log(emailInput);console.log(emailPassword);if(loginToggle){fetch('https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAsySVKfOiJBUKOhOdwrymEguoXwStpNe0',{method:'POST',body:JSON.stringify({'email':emailInput,'password':emailPassword,'returnSecureToken':true}),headers:{'content-type':'application/json'}}).then(function(res){if(res.ok){return res.json();}else{return res.json().then(function(data){var message=\"Authenticaion failed\";if(data){message=data.error.message;}alert(message);});}}).then(function(data){alert('login successfull');console.log('successfull response',data);oathContext.Login(data.idToken);navigate('/profile');}).catch(function(error){alert(error);});}else{fetch('https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAsySVKfOiJBUKOhOdwrymEguoXwStpNe0',{method:'POST',body:JSON.stringify({'email':emailInput,'password':emailPassword,'returnSecureToken':true}),headers:{'content-type':'application/json'}}).then(function(res){if(res.ok){alert('account created successfully');}else{return res.json().then(function(data){var message=\"Authenticaion failed\";if(data){message=data.error.message;}alert(message);});}console.log(res.json());});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login_form\",children:[/*#__PURE__*/_jsx(\"h1\",{children:loginToggle?'login':'sign up'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input_group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input_group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:loginToggle?\"login\":\"create an account\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:toggleHandler,children:!loginToggle?\"login\":\"create an account\"})})]})]})]});};export default Auth;","map":{"version":3,"names":["React","useContext","useState","useNavigate","AuthContext","Oathcontext","Auth","navigate","oathContext","loginToggle","setLogin","toggleHandler","preVal","submitHandler","e","preventDefault","emailInput","document","getElementById","value","emailPassword","console","log","fetch","method","body","JSON","stringify","headers","then","res","ok","json","data","message","error","alert","Login","idToken","catch"],"sources":["E:/project/react/react-auth/src/pages/Auth.jsx"],"sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport AuthContext, { Oathcontext } from \"../store/AuthContext\";\r\nimport './Auth.scss';\r\n\r\n\r\nconst Auth = () => {\r\n\r\n  //navigate\r\n  const navigate=useNavigate();\r\n\r\n  //context\r\n  const oathContext = useContext(Oathcontext);\r\n\r\n  const [loginToggle, setLogin] = useState(true);\r\n\r\n  const toggleHandler = () => {\r\n    setLogin((preVal) => !preVal);\r\n  };\r\n\r\n  const submitHandler=(e)=>{\r\n    e.preventDefault();\r\n    const emailInput = document.getElementById('email').value;\r\n    const emailPassword = document.getElementById('password').value;\r\n\r\n    console.log(emailInput);\r\n    console.log(emailPassword);\r\n    \r\n    if(loginToggle){\r\n        fetch('https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAsySVKfOiJBUKOhOdwrymEguoXwStpNe0',\r\n        {\r\n            method:'POST',\r\n            body:JSON.stringify({\r\n                'email':emailInput,\r\n                'password':emailPassword,\r\n                'returnSecureToken':true\r\n\r\n            }),\r\n            headers:{'content-type':'application/json'}\r\n    \r\n        }).then((res)=>{\r\n            if(res.ok){\r\n                return res.json()\r\n            }else{\r\n                return res.json().then(data=>{\r\n                    let message=\"Authenticaion failed\";\r\n                    if(data){\r\n                        message=data.error.message;\r\n                    }\r\n                    alert(message);\r\n                })\r\n            }\r\n\r\n        }).then((data)=>{\r\n          alert('login successfull');\r\n          console.log('successfull response',data)\r\n          oathContext.Login(data.idToken);\r\n          navigate('/profile');\r\n        }).catch((error)=>{alert(error)})\r\n\r\n    }else{\r\n        fetch('https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAsySVKfOiJBUKOhOdwrymEguoXwStpNe0',\r\n        {\r\n            method:'POST',\r\n            body:JSON.stringify({\r\n                'email':emailInput,\r\n                'password':emailPassword,\r\n                'returnSecureToken':true\r\n\r\n            }),\r\n            headers:{'content-type':'application/json'}\r\n    \r\n        }).then((res)=>{\r\n            if(res.ok){\r\n                alert('account created successfully');    \r\n            }else{\r\n                return res.json().then(data=>{\r\n                    let message=\"Authenticaion failed\";\r\n                    if(data){\r\n                        message=data.error.message;\r\n                    }\r\n                    alert(message);\r\n                })\r\n            }\r\n            console.log(res.json())\r\n        })\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"login_form\">\r\n       <h1>{loginToggle?'login':'sign up'}</h1> \r\n      <form onSubmit={submitHandler}>\r\n        <div className=\"input_group\">\r\n          <label>Email</label><br/>\r\n          <input type=\"email\" id=\"email\" required />\r\n        </div>\r\n        <div className=\"input_group\">\r\n          <label>password</label><br/>\r\n          <input type=\"password\" id=\"password\" required />\r\n        </div>\r\n        <div className=\"actions\">\r\n          <p>\r\n            <button type=\"submit\">\r\n              {loginToggle ? \"login\" : \"create an account\"}\r\n            </button>\r\n          </p>\r\n          <p>\r\n            <button type=\"button\" onClick={toggleHandler}>\r\n              {!loginToggle ? \"login\" : \"create an account\"}\r\n            </button>\r\n          </p>\r\n\r\n         \r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}